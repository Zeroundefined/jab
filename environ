#! /bin/bash

source ~/.jab/jab_environ

export COLUMNS

export EXITSTATUS="$?"
export FIGNORE=.pyc:.swp:~:.o

#export DISPLAY=:0

# infinite history (was claimed - in practice it keeps very short histories)
# unset HISTSIZE
# unset HISTFILESIZE
# So we explicitly keep very large histories
export HISTFILESIZE=100000
export HISTSIZE=$HISTFILESIZE
# format history times
export HISTTIMEFORMAT="%h/%d - %H:%M:%S "
# ignore some simple commands in history
export HISTIGNORE="bg:fg:history:gh:hh"
#  remember multi-line commands
shopt -s cmdhist
# edit a failed history substitution (default just ignores them)
shopt -s histreedit
# edit history line before executing
shopt -s histverify 
# save multi-line commands to history with "\n", not ":"
shopt -s lithist
# Make bash check its window size after a process completes
shopt -s checkwinsize
# append to the history file, don't overwrite it
shopt -s histappend
# correct minor spelling errors for cd
shopt -s cdspell
#
# some interesting paths
#
export LOGS=/var/log
export XAUTHORITY=$HOME/.Xauthority

if [[ -f /usr/local/bin/gls ]]
then
	LS_PROGRAM=/usr/local/bin/gls
	DIRCOLORS=/usr/local/bin/gdircolors
else
	LS_PROGRAM=/bin/ls
	if [[ -f /usr/bin/dircolors ]]
	then DIRCOLORS=/usr/bin/dircolors
	fi
fi

if $LS_PROGRAM -@ >/dev/null 2>&1 
then
	export LS_COLOUR_OPTION='-@'
elif $LS_PROGRAM --color=auto >/dev/null 2>&1
then
	export LS_COLOUR_OPTION='--color=auto'
else
	export LS_COLOUR_OPTION=
fi
if $LS_PROGRAM --group-directories-first >/dev/null 2>&1
then
	export LS_DIRS_OPTION='--group-directories-first'
else
	export LS_DIRS_OPTION=
fi
[[ -n $DIRCOLORS ]] && eval $($DIRCOLORS ~/.dir_colors)

add_to_a_path PATH /bin
add_to_a_path PATH /usr/bin
add_to_a_path PATH /usr/local/bin
add_to_a_path PATH /usr/local/sbin
add_to_a_path PATH $JAB/bin
add_to_a_path PATH ~/bin
add_to_a_path PATH ~/git/bin
add_to_a_path PATH /opt/local/bin
add_to_a_path PATH /sbin 

export PS1

#
# Path dependencies
#

if [ -x /usr/local/bin/which ]
then
	export WHICH=/usr/local/bin/which
else
	export WHICH=/usr/bin/which
fi
export EDITOR=`$WHICH vim`
export EMAIL="al@al-got-rhythm.net"

source $JAB/colour-environ

RE_IP="\<\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}\>"

set -o vi
